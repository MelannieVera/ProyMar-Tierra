<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mariscos del Mar</title>
<style>
/* ---------- BASE (mantiene tu diseño original) ---------- */
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 18px;
  background: #ffffff;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

/* Contenedores (login/admin/form/table/empleado) */
.login-container,
.admin-container,
.form-container,
.table-container,
.empleado-container {
  background: white;
  padding: 30px 40px;
  border-radius: 15px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.3);
  width: 380px;               /* conserva tu ancho original */
  max-width: 95%;             /* permite ajuste en pantallas pequeñas */
  text-align: center;
  position: relative;
  box-sizing: border-box;
  margin-top: 20px;
  margin-left: auto;
  margin-right: auto;
}

img.logo {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  margin-bottom: 15px;
  object-fit: cover;
  border: 3px solid #0077b6;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  transition: transform 0.3s;
}
img.logo:hover { transform: scale(1.1); }

h2 { margin-bottom: 25px; color: #0077b6; padding: 5px 0; }

/* Inputs y botones mantienen estilo funcional */
input, select, textarea, button {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-sizing: border-box;
}
button { background: #0077b6; color: white; border: none; cursor: pointer; font-weight: bold; }
button:hover { background: #0096c7; }

/* Tabla principal: scroll horizontal en pantallas chicas para no romper estructura */
.table-container {
  width: 90%;
  max-width: 1100px;   /* más espacio para tablas en pantallas grandes */
  max-height: 80vh;
  overflow-y: auto;
  padding: 30px;
  margin-top: 20px;
}
.table-wrapper {
  width: 100%;
  overflow-x: auto;    /* permite scroll horizontal si la tabla es ancha */
}

/* Mantener tabla como tabla (no convertir en bloques) para que tu JS siga igual */
table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  min-width: 700px; /* fuerza scroll horizontal si la pantalla es muy angosta */
}
th, td {
  border-bottom: 1px solid #ccc;
  padding: 8px 6px;
  word-wrap: break-word;
}
th { text-align: center; color: #0077b6; }
td:nth-child(2), td:nth-child(5), td:nth-child(6) { text-align: center; }

.action-btn {
  width: 100%;
  padding: 6px 0;
  margin: 4px 0;
  font-size: 0.85em;
  border-radius: 5px;
  border: none;
  background: #0077b6;
  color: white;
  cursor: pointer;
}
.action-btn:hover { background: #0096c7; }

.thumbnail {
  width: 50px;
  height: 50px;
  object-fit: cover;
  border-radius: 5px;
  border: 2px solid #0077b6;
}

/* Platillo item (lista de platillos al crear pedido) */
.platillo-item {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  border: 1px solid #ccc;
  padding: 10px;
  margin-bottom: 15px;
  border-radius: 10px;
}
.platillo-item img {
  width: 70px;
  height: 70px;
  object-fit: cover;
  margin-right: 15px;
  border-radius: 5px;
  border: 2px solid #0077b6;
}
.platillo-info { flex: 1; min-width: 150px; }
.platillo-actions { display: flex; flex-direction: column; align-items: flex-end; gap: 5px; }
.platillo-actions input { width: 60px; padding: 5px; }

/* -------------------------------------------------------- */
/* ---------- RESPONSIVITY (solo CSS, no JS modificado) -- */
/* -------------------------------------------------------- */

/* Ajustes pantallas medianas */
@media (max-width: 1000px) {
  .table-container { max-width: 95%; padding: 24px; }
  table { min-width: 650px; }
  .login-container, .admin-container, .form-container, .empleado-container {
    padding: 24px;
  }
}

/* Ajustes pantallas pequeñas: contenedores ocupan casi todo el ancho */
@media (max-width: 700px) {
  body { padding: 12px; }
  .login-container, .admin-container, .form-container, .table-container, .empleado-container {
    width: 95%;
    padding: 18px;
  }

  img.logo { width: 86px; height: 86px; }
  h2 { font-size: 1.15rem; margin-bottom: 18px; }

  /* Reducir tamaño mínimo de tabla para mejorar encaje; si es muy ancha, habrá scroll horizontal */
  table { min-width: 600px; font-size: 14px; }
  .thumbnail { width: 44px; height: 44px; }
}

/* Ajustes muy pequeños (teléfonos) */
@media (max-width: 480px) {
  body { padding: 10px; }

  .login-container, .admin-container, .form-container, .empleado-container {
    padding: 14px;
    border-radius: 12px;
  }

  img.logo { width: 72px; height: 72px; }
  h2 { font-size: 1.05rem; margin-bottom: 14px; }

  /* En móviles, apilar la ficha de platillo para que se vea ordenado */
  .platillo-item { flex-direction: column; align-items: flex-start; gap: 8px; }
  .platillo-item img { margin-right: 0; }

  .platillo-actions {
    width: 100%;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    margin-top: 6px;
  }
  .platillo-actions input { width: 76px; }

  /* Tabla: mantenemos la tabla pero permitimos scroll horizontal; no convertimos filas a bloques
     porque eso cambia la estructura y rompería tus botones/acciones. */
  .table-container { padding: 14px; }
  table { min-width: 520px; font-size: 13px; }
  th, td { padding: 8px 6px; }
}

/* Si el usuario vio el formulario de 'Realizar Pedido' que tú pones con estilo inline,
   en pantallas chicas permitirá scroll vertical por el container (ya definido inline). */
</style>
</head>
<body>
<div id="app"></div>
<script>
const app=document.getElementById('app');
const usuarios=[{id:'admin',password:'admin123',tipo:'Administrador'},{id:'emple1',password:'123',tipo:'Empleado'}];
let personal=[]; let platillos=[]; let pedidos=[]; let empleadoActual=null;

// --------- LOGIN ---------
function renderLogin(){
    app.innerHTML=`<div class="login-container">
        <img class="logo" src="img/logo.png">
        <h2>Iniciar Sesión</h2>
        <input type="text" id="userId" placeholder="ID">
        <input type="password" id="userPassword" placeholder="Contraseña">
        <button onclick="login()">Ingresar</button>
    </div>`;
}
function login(){
    const id=document.getElementById('userId').value.trim();
    const password=document.getElementById('userPassword').value.trim();
    const user=usuarios.find(u=>u.id===id && u.password===password);
    if(user){empleadoActual=(user.tipo==='Empleado')?user.id:null; user.tipo==='Administrador'?renderAdminMenu():renderEmpleadoMenu();}
    else alert("Usuario o contraseña incorrecta");
}

// --------- MENUS ---------
function renderAdminMenu(){
    app.innerHTML=`<div class="admin-container">
        <img class="logo" src="img/logo.png">
        <h2>Menú Administrador</h2>
        <button onclick="renderRegistrarPersonal()">Registrar Personal</button>
        <button onclick="renderListaPersonal()">Lista de Personal</button>
        <button onclick="renderRegistrarPlatillo()">Registrar Platillo</button>
        <button onclick="renderListaPlatillos()">Lista de Platillos</button>
        <button onclick="renderListaPedidos()">Pedidos Realizados</button>
        <button onclick="renderLogin()">Cerrar Sesión</button>
    </div>`;
}
function renderEmpleadoMenu(){
    app.innerHTML=`<div class="empleado-container">
        <img class="logo" src="img/logo.png">
        <h2>Menú Empleado</h2>
        <button onclick="renderRealizarPedido()">Realizar Pedido</button>
        <button onclick="renderListaPedidos()">Pedidos Realizados</button>
        <button onclick="renderLogin()">Cerrar Sesión</button>
    </div>`;
}

// --------- PERSONAL ---------
function renderRegistrarPersonal(){
    app.innerHTML=`<div class="form-container">
        <img class="logo" src="img/logo.png">
        <h2>Registrar Personal</h2>
        <input type="text" id="personal-id" placeholder="ID">
        <input type="password" id="personal-password" placeholder="Contraseña">
        <select id="personal-tipo">
            <option value="Empleado">Empleado</option>
            <option value="Administrador">Administrador</option>
        </select>
        <input type="text" id="personal-nombre" placeholder="Nombre">
        <input type="text" id="personal-celular" placeholder="Celular">
        <input type="email" id="personal-mail" placeholder="Email">
        <input type="text" id="personal-direccion" placeholder="Dirección">
        <button onclick="agregarPersonal()">Agregar</button>
        <button onclick="renderAdminMenu()">Volver</button>
    </div>`;
}
function agregarPersonal(){
    const id=document.getElementById('personal-id').value.trim();
    const password=document.getElementById('personal-password').value.trim();
    const tipo=document.getElementById('personal-tipo').value;
    const nombre=document.getElementById('personal-nombre').value.trim();
    const celular=document.getElementById('personal-celular').value.trim();
    const mail=document.getElementById('personal-mail').value.trim();
    const direccion=document.getElementById('personal-direccion').value.trim();
    if(!id||!password||!nombre){alert("ID, contraseña y nombre obligatorios."); return;}
    personal.push({id,password,tipo,nombre,celular,mail,direccion});
    alert("Personal agregado."); renderRegistrarPersonal();
}
function renderListaPersonal(){
    let filas=personal.map((p,i)=>`<tr>
        <td>${p.id}</td><td>${p.tipo}</td><td>${p.nombre}</td>
        <td>${p.celular}</td><td>${p.mail}</td><td>${p.direccion}</td>
        <td>
            <button class="action-btn" onclick="editarPersonal(${i})">Editar</button>
            <button class="action-btn" onclick="eliminarPersonal(${i})">Eliminar</button>
        </td>
    </tr>`).join('');
    app.innerHTML=`<div class="table-container">
        <img class="logo" src="img/logo.png">
        <h2>Lista de Personal</h2>
        <div class="table-wrapper">
          <table>
            <thead><tr><th>ID</th><th>Tipo</th><th>Nombre</th><th>Celular</th><th>Email</th><th>Dirección</th><th>Acciones</th></tr></thead>
            <tbody>${filas}</tbody>
          </table>
        </div>
        <button onclick="renderRegistrarPersonal()">Agregar Nuevo</button>
        <button onclick="renderAdminMenu()">Volver</button>
    </div>`;
}
function editarPersonal(i){
    const p=personal[i];
    app.innerHTML=`<div class="form-container">
        <img class="logo" src="img/logo.png">
        <h2>Editar Personal</h2>
        <input type="text" id="edit-id" value="${p.id}">
        <input type="password" id="edit-password" value="${p.password}">
        <select id="edit-tipo">
            <option value="Empleado" ${p.tipo==='Empleado'?'selected':''}>Empleado</option>
            <option value="Administrador" ${p.tipo==='Administrador'?'selected':''}>Administrador</option>
        </select>
        <input type="text" id="edit-nombre" value="${p.nombre}">
        <input type="text" id="edit-celular" value="${p.celular}">
        <input type="email" id="edit-mail" value="${p.mail}">
        <input type="text" id="edit-direccion" value="${p.direccion}">
        <button onclick="guardarEdicionPersonal(${i})">Guardar</button>
        <button onclick="renderListaPersonal()">Cancelar</button>
    </div>`;
}
function guardarEdicionPersonal(i){
    const id=document.getElementById('edit-id').value.trim();
    const password=document.getElementById('edit-password').value.trim();
    const tipo=document.getElementById('edit-tipo').value;
    const nombre=document.getElementById('edit-nombre').value.trim();
    const celular=document.getElementById('edit-celular').value.trim();
    const mail=document.getElementById('edit-mail').value.trim();
    const direccion=document.getElementById('edit-direccion').value.trim();
    if(!id||!password||!nombre){alert("ID, contraseña y nombre obligatorios."); return;}
    personal[i]={id,password,tipo,nombre,celular,mail,direccion};
    alert("Empleado actualizado."); renderListaPersonal();
}
function eliminarPersonal(i){if(confirm("¿Desea eliminar este registro?")){personal.splice(i,1);renderListaPersonal();}}

// --------- PLATILLOS ---------
function renderRegistrarPlatillo(){
    app.innerHTML=`<div class="form-container">
        <img class="logo" src="img/logo.png">
        <h2>Registrar Platillo</h2>
        <input type="text" id="platillo-nombre" placeholder="Nombre">
        <input type="number" id="platillo-precio" placeholder="Precio">
        <textarea id="platillo-descripcion" placeholder="Descripción"></textarea>
        <label>Imagen:</label><input type="file" id="platillo-foto" accept="image/*">
        <button onclick="agregarPlatillo()">Agregar</button>
        <button onclick="renderAdminMenu()">Volver</button>
    </div>`;
}
function agregarPlatillo(){
    const nombre=document.getElementById('platillo-nombre').value.trim();
    const precio=parseFloat(document.getElementById('platillo-precio').value);
    const descripcion=document.getElementById('platillo-descripcion').value.trim();
    const fotoInput=document.getElementById('platillo-foto');
    if(!nombre||isNaN(precio)){alert("Nombre y precio obligatorios."); return;}
    if(fotoInput.files && fotoInput.files[0]){
        const reader=new FileReader();
        reader.onload=e=>{platillos.push({nombre,precio,descripcion,foto:e.target.result});alert("Platillo agregado");renderRegistrarPlatillo();};
        reader.readAsDataURL(fotoInput.files[0]);
    } else{platillos.push({nombre,precio,descripcion,foto:''});alert("Platillo agregado");renderRegistrarPlatillo();}
}
function renderListaPlatillos(){
    let filas=platillos.map((p,i)=>`<tr>
        <td>${p.nombre}</td><td>${p.precio}</td><td>${p.descripcion}</td>
        <td><img src="${p.foto||'img/logo.png'}" class="thumbnail"></td>
        <td>
            <button class="action-btn" onclick="editarPlatillo(${i})">Editar</button>
            <button class="action-btn" onclick="eliminarPlatillo(${i})">Eliminar</button>
        </td>
    </tr>`).join('');
    app.innerHTML=`<div class="table-container">
        <img class="logo" src="img/logo.png">
        <h2>Lista de Platillos</h2>
        <div class="table-wrapper">
          <table><thead><tr><th>Nombre</th><th>Precio</th><th>Descripción</th><th>Imagen</th><th>Acciones</th></tr></thead>
          <tbody>${filas}</tbody></table>
        </div>
        <button onclick="renderRegistrarPlatillo()">Agregar Nuevo</button>
        <button onclick="renderAdminMenu()">Volver</button>
    </div>`;
}
function editarPlatillo(i){
    const p=platillos[i];
    app.innerHTML=`<div class="form-container">
        <img class="logo" src="img/logo.png">
        <h2>Editar Platillo</h2>
        <input type="text" id="edit-nombre" value="${p.nombre}">
        <input type="number" id="edit-precio" value="${p.precio}">
        <textarea id="edit-descripcion">${p.descripcion}</textarea>
        <label>Imagen:</label><input type="file" id="edit-foto" accept="image/*">
        <button onclick="guardarEdicionPlatillo(${i})">Guardar</button>
        <button onclick="renderListaPlatillos()">Cancelar</button>
    </div>`;
}
function guardarEdicionPlatillo(i){
    const nombre=document.getElementById('edit-nombre').value.trim();
    const precio=parseFloat(document.getElementById('edit-precio').value);
    const descripcion=document.getElementById('edit-descripcion').value.trim();
    const fotoInput=document.getElementById('edit-foto');
    if(!nombre||isNaN(precio)){alert("Nombre y precio obligatorios."); return;}
    if(fotoInput.files && fotoInput.files[0]){
        const reader=new FileReader();
        reader.onload=e=>{platillos[i]={nombre,precio,descripcion,foto:e.target.result};alert("Platillo actualizado");renderListaPlatillos();};
        reader.readAsDataURL(fotoInput.files[0]);
    } else {platillos[i]={nombre,precio,descripcion,foto:platillos[i].foto};alert("Platillo actualizado");renderListaPlatillos()}
}
function eliminarPlatillo(i){if(confirm("¿Desea eliminar este platillo?")){platillos.splice(i,1);renderListaPlatillos();}}

// --------- PEDIDOS ---------
function renderRealizarPedido(){
    if(platillos.length===0){alert("No hay platillos registrados."); renderEmpleadoMenu(); return;}
    const listaPlatillos=platillos.map((p,i)=>`<div class="platillo-item">
        <img src="${p.foto||'img/logo.png'}">
        <div class="platillo-info"><strong>${p.nombre}</strong><br>${p.descripcion}<br>$${p.precio}</div>
        <div class="platillo-actions">
            <input type="number" id="cantidad-${i}" min="0" value="0">
        </div>
    </div>`).join('');
    app.innerHTML=`<div class="form-container" style="width:90%;max-width:650px;max-height:70vh;overflow-y:auto;">
        <img class="logo" src="img/logo.png">
        <h2>Realizar Pedido</h2>
        <input type="text" id="mesa-num" placeholder="Número de Mesa">
        ${listaPlatillos}
        <button onclick="confirmarPedido()">Agregar Pedido</button>
        <button onclick="renderEmpleadoMenu()">Volver</button>
    </div>`;
}
function confirmarPedido(){
    const mesa=document.getElementById('mesa-num').value.trim();
    if(!mesa){alert("El campo de mesa es obligatorio."); return;}
    const items=[]; let total=0;
    platillos.forEach((p,i)=>{
        const cantidad=parseInt(document.getElementById(`cantidad-${i}`).value);
        if(cantidad>0){items.push({platillo:p.nombre,cantidad,precio:p.precio*cantidad}); total+=p.precio*cantidad;}
    });
    if(items.length===0){alert("Debes seleccionar al menos un platillo."); return;}
    if(confirm(`Total del pedido: $${total}. ¿Deseas confirmar?`)){
        pedidos.push({mesa,empleado:empleadoActual||'admin',items,total});
        alert("Pedido agregado correctamente."); renderEmpleadoMenu();
    }
}
function renderListaPedidos(){
    let filas=pedidos.map((p,i)=>`<tr>
        <td>${p.mesa}</td><td>${p.empleado}</td>
        <td>${p.items.map(it=>it.platillo+' x'+it.cantidad).join('<br>')}</td>
        <td>${p.items.map(it=>it.cantidad).reduce((a,b)=>a+b,0)}</td>
        <td>$${p.total}</td>
        <td><button class="action-btn" onclick="eliminarPedido(${i})">Eliminar</button></td>
    </tr>`).join('');
    app.innerHTML=`<div class="table-container">
        <img class="logo" src="img/logo.png">
        <h2>Pedidos Realizados</h2>
        <div class="table-wrapper">
          <table><thead><tr><th>Mesa</th><th>Empleado</th><th>Platillos</th><th>Cantidad</th><th>Total</th><th>Acción</th></tr></thead>
          <tbody>${filas}</tbody></table>
        </div>
        <button onclick="${empleadoActual?'renderEmpleadoMenu()':'renderAdminMenu()'}">Volver</button>
    </div>`;
}
function eliminarPedido(i){if(confirm("¿Desea eliminar este pedido?")){pedidos.splice(i,1);renderListaPedidos();}}

// Inicial
renderLogin();
</script>
</body>
</html>
